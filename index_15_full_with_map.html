<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>StudyGO ã‚¿ã‚¤ãƒ—è¨ºæ–­ï¼ˆ15å•+ç”»åƒ+ãƒãƒƒãƒ—ï¼‰</title>
  <style>
    body {
      font-family: 'Segoe UI', 'ãƒ¡ã‚¤ãƒªã‚ª', sans-serif;
      background: linear-gradient(to bottom, #f9f9ff, #eef3ff);
      padding: 30px;
      color: #333;
    }
    h1 {
      color: #2a4d9b;
      text-align: center;
    }
    .question {
      margin-bottom: 30px;
      padding: 15px;
      background: #ffffff;
      border-radius: 10px;
      box-shadow: 0 0 8px rgba(0,0,0,0.05);
    }
    button {
      display: block;
      background-color: #f4f4f4;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 10px 16px;
      margin: 8px 0;
      cursor: pointer;
      font-size: 15px;
    }
    button:hover {
      background-color: #dde8ff;
      border-color: #6698ff;
    }
    #result {
      margin-top: 30px;
      font-weight: bold;
      font-size: 20px;
      text-align: center;
    }
    #result img {
      width: 80%;
      max-width: 400px;
      border-radius: 12px;
      margin-top: 20px;
    }
    .note {
      font-size: 13px;
      color: #666;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<h1>ğŸ“ ã‚ãªãŸã«æœ€é©ãªå‹‰å¼·å ´æ‰€ã‚¿ã‚¤ãƒ—è¨ºæ–­ï¼ˆ15å•ï¼‰</h1>
<div id="quiz"></div>
<div id="result"></div>

<script>
const questions = Array.from({ length: 15 }, (_, i) => ({
  text: `è³ªå• ${i + 1}ï¼šã“ã®è¨­å•ã¯ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ã§ã™`,
  answers: [
    { text: "é¸æŠè‚¢ A", score: { jishushitsu: 1 } },
    { text: "é¸æŠè‚¢ B", score: { toshokan: 1 } },
    { text: "é¸æŠè‚¢ C", score: { coworking: 1, cafe: 1, family: 1 } }
  ]
}));

let current = 0;
let score = { jishushitsu: 0, toshokan: 0, coworking: 0, cafe: 0, family: 0 };

const quiz = document.getElementById("quiz");
const result = document.getElementById("result");

function showQuestion() {
  const q = questions[current];
  quiz.innerHTML = `<div class="question"><p><strong>Q${current + 1}.</strong> ${q.text}</p></div>`;
  q.answers.forEach((a) => {
    const btn = document.createElement("button");
    btn.textContent = a.text;
    btn.onclick = () => {
      Object.keys(a.score).forEach(type => {
        score[type] += a.score[type];
      });
      current++;
      if (current < questions.length) {
        showQuestion();
      } else {
        showResult();
      }
    };
    quiz.appendChild(btn);
  });
}

function showResult() {
  const max = Math.max(...Object.values(score));
  const type = Object.keys(score).find(k => score[k] === max);
  const names = {
    jishushitsu: "æœ‰æ–™è‡ªç¿’å®¤",
    toshokan: "å›³æ›¸é¤¨",
    coworking: "ã‚³ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ã‚¹ãƒšãƒ¼ã‚¹",
    cafe: "ã‚«ãƒ•ã‚§",
    family: "ãƒ•ã‚¡ãƒŸãƒªãƒ¼ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³"
  };
  const images = {
    jishushitsu: "https://source.unsplash.com/featured/?study,desk",
    toshokan: "https://source.unsplash.com/featured/?library,study",
    coworking: "https://source.unsplash.com/featured/?coworking,office",
    cafe: "https://source.unsplash.com/featured/?cafe,coffee",
    family: "https://source.unsplash.com/featured/?diner,restaurant"
  };

  let resultHTML = `
    <p>ã‚ãªãŸã«æœ€é©ãªã®ã¯â€¦</p>
    <h2>ğŸ¯ã€${names[type]}ã€‘ã‚¿ã‚¤ãƒ—ï¼</h2>
    <img src="${images[type]}" alt="${names[type]}ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ç”»åƒ">
    <div><a href="https://studygo.jp" target="_blank">â–¶ æ²è¼‰åº—èˆ—ã‚’è¦‹ã‚‹</a></div>
  `;

  if (["cafe", "family", "toshokan"].includes(type)) {
    navigator.geolocation.getCurrentPosition(function(pos) {
      const lat = pos.coords.latitude;
      const lng = pos.coords.longitude;
      const query = encodeURIComponent(names[type]);
      const mapURL = `https://www.google.com/maps/search/${query}/@${lat},${lng},15z`;
      result.innerHTML = resultHTML + 
        `<p><a href="${mapURL}" target="_blank">ğŸ“ å‘¨è¾ºã®${names[type]}ã‚’Googleãƒãƒƒãƒ—ã§æ¢ã™</a></p>
         <p class="note">â€» ç¾åœ¨ã€StudyGOã§ã¯å›³æ›¸é¤¨ãƒ»ã‚«ãƒ•ã‚§ãƒ»ãƒ•ã‚¡ãƒŸãƒ¬ã‚¹ã®æ²è¼‰ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚é †æ¬¡æ‹¡å¤§ä¸­ã§ã™ã€‚</p>`;
    }, function() {
      result.innerHTML = resultHTML + 
        `<p>â€» ä½ç½®æƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</p>
         <p class="note">â€» ç¾åœ¨ã€StudyGOã§ã¯å›³æ›¸é¤¨ãƒ»ã‚«ãƒ•ã‚§ãƒ»ãƒ•ã‚¡ãƒŸãƒ¬ã‚¹ã®æ²è¼‰ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚é †æ¬¡æ‹¡å¤§ä¸­ã§ã™ã€‚</p>`;
    });
  } else {
    result.innerHTML = resultHTML;
  }

  quiz.innerHTML = "";
}

showQuestion();
</script>

</body>
</html>
